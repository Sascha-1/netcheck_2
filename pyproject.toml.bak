[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "netcheck"
version = "1.0.0"
description = "Network interface analysis tool for GNU/Linux"
readme = "README.md"
requires-python = ">=3.12"
license = {text = "AGPL-3.0-or-later"}
authors = [{name = "Netcheck Contributors"}]
dependencies = ["requests>=2.31.0"]

[project.urls]
Homepage = "https://github.com/user/netcheck"
Repository = "https://github.com/user/netcheck"

[project.scripts]
netcheck = "netcheck:main"

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
addopts = ["-v", "--strict-markers"]

[tool.coverage.run]
source = ["."]
omit = ["*/tests/*", "*/__pycache__/*"]

[tool.mypy]
python_version = "3.12"
strict = true
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
# When running 'mypy' without arguments, check these files/directories
files = [
    "netcheck.py",
    "orchestrator.py",
    "display.py",
    "export.py",
    "models.py",
    "enums.py",
    "config.py",
    "logging_config.py",
    "network",
    "utils",
]
exclude = [
    "tests/",
    "docs/",
    "logs/",
]

[tool.ruff]
target-version = "py312"
line-length = 100

[tool.ruff.lint]
select = ["E", "F", "I", "N", "UP", "S", "B", "A", "D"]

[tool.pylint.main]
jobs = 0
py-version = "3.12"
recursive = true
# Directories to ignore
ignore = ["tests", "docs", "logs", ".mypy_cache", ".pytest_cache", "__pycache__"]
# Patterns to ignore
ignore-patterns = ["^\\..*"]

[tool.pylint.messages_control]
disable = [
    "missing-module-docstring",
    "too-few-public-methods",
    "too-many-instance-attributes",  # InterfaceInfo needs 16 attributes by design
    "too-many-return-statements",  # Detection functions have many valid return paths
    "too-many-arguments",  # Some functions need many params (e.g., detect_dns_leak)
    "broad-exception-caught",  # We catch Exception for graceful error handling
    "unused-argument",  # Some arguments kept for API consistency
    "duplicate-code",  # Sort key functions are intentionally similar
]

[tool.pylint.format]
max-line-length = 100

[tool.pylint.logging]
logging-format-style = "old"
